<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Beercap Mosaic Generator ‚Äî Transform Images into Beercap Art</title>
    <meta name="title" content="Beercap Mosaic Generator ‚Äî Transform Images into Beercap Art">
    <meta name="description" content="Free online tool to convert any image into a beercap mosaic. Upload your beercap collection, choose a target image, and get step-by-step assembly instructions. Works offline, no signup required.">
    <meta name="keywords" content="beercap mosaic, bottle cap art, beer cap craft, image to mosaic, mosaic generator, DIY art, beercap art, craft project, pixel art, color matching">
    <meta name="author" content="Beercap Mosaic Generator">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#1a1a1a">
    <meta name="msapplication-TileColor" content="#ff8a00">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://beercap-mosaic.com/">
    <meta property="og:title" content="Beercap Mosaic Generator ‚Äî Transform Images into Beercap Art">
    <meta property="og:description" content="Free online tool to convert any image into a beercap mosaic. Upload your beercap collection, choose a target image, and get step-by-step assembly instructions.">
    <meta property="og:image" content="https://beercap-mosaic.com/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Beercap Mosaic Generator">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://beercap-mosaic.com/">
    <meta name="twitter:title" content="Beercap Mosaic Generator ‚Äî Transform Images into Beercap Art">
    <meta name="twitter:description" content="Free online tool to convert any image into a beercap mosaic. Upload your beercap collection and get step-by-step assembly instructions.">
    <meta name="twitter:image" content="https://beercap-mosaic.com/og-image.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://beercap-mosaic.com/">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç∫</text></svg>">
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Beercap Mosaic Generator",
        "description": "Free online tool to convert any image into a beercap mosaic with step-by-step assembly instructions.",
        "url": "https://beercap-mosaic.com/",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Image to mosaic conversion",
            "Beercap library management",
            "Color matching algorithm",
            "Hexagonal and square layouts",
            "Export to PNG and CSV",
            "Works offline"
        ],
        "screenshot": "https://beercap-mosaic.com/screenshot.png",
        "softwareVersion": "1.0.0",
        "author": {
            "@type": "Organization",
            "name": "Beercap Mosaic Generator"
        }
    }
    </script>

    <!-- Adsense -->
    <meta name="google-adsense-account" content="ca-pub-5650792980026546">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1 class="app-title">Beercap Mosaic</h1>
            <p class="app-subtitle">Transform images into beercap art instructions</p>
        </header>

        <!-- Main Content Grid -->
        <main class="main-grid">
            <!-- Beercap Library Panel -->
            <section class="panel">
                <div class="panel-header">
                    <h2 class="panel-title">Beercap Library</h2>
                    <div class="library-actions">
                        <span class="stats-badge">
                            Total: <strong id="total-caps">0</strong> caps
                        </span>
                        <button id="add-beercap-btn" class="btn btn-primary btn-sm">+ Add</button>
                        <button id="scan-beercaps-btn" class="btn btn-secondary btn-sm">üì∑ Scan</button>
                        <button id="clear-library-btn" class="btn btn-danger btn-sm">Clear</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="beercap-list" class="beercap-list">
                        <div class="empty-library">
                            <p>No beercaps added yet.</p>
                            <p>Click "Add Beercap" to start building your library.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Target Image Panel -->
            <section class="panel">
                <div class="panel-header">
                    <h2 class="panel-title">Target Image</h2>
                </div>
                <div class="panel-content">
                    <div id="target-upload-area" class="upload-area">
                        <input type="file" id="target-image-input" accept="image/*">
                        <div id="target-image-placeholder" class="upload-placeholder">
                            <div class="upload-icon">üñºÔ∏è</div>
                            <p class="upload-text">Click or drag image here</p>
                            <p class="upload-hint">Supports JPG, PNG, GIF, WebP</p>
                        </div>
                        <img id="target-image-preview" class="target-preview hidden" alt="Target image preview">
                    </div>
                    
                    <div id="grid-info" class="grid-info">
                        Upload an image and add beercaps to see grid dimensions
                    </div>
                    
                    <div class="layout-toggle">
                        <span class="layout-label">Layout:</span>
                        <div class="toggle-group">
                            <input type="radio" id="layout-square" name="layout" value="square">
                            <label for="layout-square" class="toggle-option">Square</label>
                            <input type="radio" id="layout-hex" name="layout" value="hex" checked>
                            <label for="layout-hex" class="toggle-option">Hexagonal</label>
                        </div>
                    </div>
                    
                    <div class="generate-section">
                        <button id="generate-btn" class="btn btn-primary btn-generate" disabled>
                            Generate Mosaic
                        </button>
                        <div id="wasm-status" class="wasm-status loading">
                            <span class="wasm-icon">‚è≥</span>
                            <span class="wasm-text">Loading WASM...</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Output Section -->
        <section id="output-section" class="output-section hidden">
            <div class="output-header">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="visual">Visual Preview</button>
                    <button class="tab-btn" data-tab="reference">Reference Grid</button>
                    <button class="tab-btn" data-tab="stats">Statistics</button>
                </div>
                <div class="export-buttons">
                    <button id="download-png-btn" class="btn btn-secondary btn-sm" disabled>
                        üì• Download PNG
                    </button>
                    <button id="download-csv-btn" class="btn btn-secondary btn-sm" disabled>
                        üìä Export CSV
                    </button>
                </div>
            </div>
            
            <div class="tab-content">
                <!-- Visual Preview Tab -->
                <div id="visual-panel" class="tab-panel active">
                    <div class="canvas-container">
                        <canvas id="visual-canvas"></canvas>
                    </div>
                </div>

                <!-- Reference Grid Tab -->
                <div id="reference-panel" class="tab-panel">
                    <div class="reference-container">
                        <div id="reference-grid"></div>
                    </div>
                    <div class="legend-section">
                        <h4 class="legend-title">Legend</h4>
                        <div id="legend-container" class="legend-container"></div>
                    </div>
                </div>

                <!-- Stats Tab -->
                <div id="stats-panel" class="tab-panel">
                    <div id="stats-content"></div>
                </div>
            </div>
        </section>
    </div>

    <!-- Add Beercap Modal -->
    <div id="beercap-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title" class="modal-title">Add Beercap</h3>
                <button id="modal-close" class="modal-close">&times;</button>
            </div>
            <form id="beercap-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="beercap-name" class="form-label">Name</label>
                        <input type="text" id="beercap-name" class="form-input" 
                               placeholder="e.g., Heineken, Corona..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="beercap-quantity" class="form-label">Quantity Available</label>
                        <input type="number" id="beercap-quantity" class="form-input" 
                               min="0" value="1" required>
                    </div>
                    
                    <div class="form-group">
                        <span class="form-label">Beercap Image</span>
                        <div class="file-input-wrapper">
                            <input type="file" id="beercap-image" accept="image/*" required>
                            <label for="beercap-image" class="file-input-label">
                                üì∑ Click to upload beercap image
                            </label>
                        </div>
                        <div class="beercap-preview-container">
                            <div id="beercap-preview"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="modal-cancel" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Beercap</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Progress Modal -->
    <div id="progress-modal" class="modal progress-modal">
        <div class="modal-content progress-modal-content">
            <div class="progress-modal-icon">‚öôÔ∏è</div>
            <h3 class="progress-modal-title">Generating Mosaic</h3>
            <div class="progress-bar-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
            </div>
            <div id="progress-text" class="progress-text">Initializing...</div>
            <div id="progress-percent" class="progress-percent">0%</div>
        </div>
    </div>

    <!-- Scan Beercaps Modal -->
    <div id="scan-modal" class="modal scan-modal">
        <div class="modal-content scan-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Scan Beercaps</h3>
                <button id="scan-modal-close" class="modal-close">&times;</button>
            </div>
            
            <div class="scan-body">
                <!-- Input selection -->
                <div class="scan-input-toggle">
                    <button id="scan-photo-btn" class="scan-toggle-btn active">
                        <span>üì∑</span> Upload Photo
                    </button>
                    <button id="scan-camera-btn" class="scan-toggle-btn">
                        <span>üé•</span> Use Camera
                    </button>
                </div>
                
                <!-- Photo upload area -->
                <div id="scan-photo-area" class="scan-area">
                    <input type="file" id="scan-photo-input" accept="image/*" hidden>
                    <label for="scan-photo-input" class="scan-upload-label">
                        <div class="scan-upload-icon">üñºÔ∏è</div>
                        <p>Click to upload a photo of your beercaps</p>
                        <p class="scan-hint">Spread caps on a contrasting background for best results</p>
                    </label>
                </div>
                
                <!-- Camera area -->
                <div id="scan-camera-area" class="scan-area hidden">
                    <video id="scan-video" autoplay playsinline></video>
                    <button id="scan-capture-btn" class="btn btn-primary">üì∏ Capture</button>
                </div>
                
                <!-- Preview with detections -->
                <div id="scan-preview-area" class="scan-area hidden">
                    <canvas id="scan-canvas"></canvas>
                    <div class="scan-detection-info">
                        <span id="scan-circle-count">0</span> caps detected
                    </div>
                </div>
                
                <!-- Detection progress -->
                <div id="scan-progress" class="scan-progress hidden">
                    <div class="progress-bar">
                        <div id="scan-progress-fill" class="progress-fill"></div>
                    </div>
                    <div id="scan-progress-text" class="progress-text">Analyzing...</div>
                </div>
                
                <!-- Clustered results -->
                <div id="scan-results" class="scan-results hidden">
                    <div id="scan-new-section" class="scan-section hidden">
                        <h4 class="scan-section-title new">üÜï New Caps (<span id="scan-new-count">0</span>)</h4>
                        <div id="scan-new-clusters" class="scan-clusters"></div>
                    </div>
                    <div id="scan-existing-section" class="scan-section hidden">
                        <h4 class="scan-section-title existing">üì¶ Matches Existing (<span id="scan-existing-count">0</span>)</h4>
                        <div id="scan-existing-clusters" class="scan-clusters"></div>
                    </div>
                    <div id="scan-empty-message" class="scan-hint hidden">No beercaps detected. Try a photo with better lighting and contrast.</div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="scan-reset-btn" class="btn btn-secondary">Reset</button>
                <button id="scan-add-btn" class="btn btn-primary" disabled>Add All to Library</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-content">
            <span class="footer-text">Made with üç∫ for beercap collectors</span>
            <div class="footer-links">
                <a href="https://github.com/martijnenco/Image2Beercaps/issues" target="_blank" rel="noopener noreferrer" class="feedback-btn">
                    <svg class="github-icon" viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    Feedback & Ideas
                </a>
                <a href="https://buymeacoffee.com/martijnenco" target="_blank" rel="noopener noreferrer" class="sponsor-btn">
                    <svg class="coffee-icon" viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364z"/>
                    </svg>
                    Buy me a coffee
                </a>
            </div>
        </div>
    </footer>

    <!-- Main application script -->
    <script type="module" src="js/app.js"></script>
</body>
</html>

